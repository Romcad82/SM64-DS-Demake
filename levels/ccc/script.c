#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/ccc/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_ccc_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x7, _ccc_segment_7SegmentRomStart, _ccc_segment_7SegmentRomEnd), 
	LOAD_MIO0(0xa, _ccm_skybox_mio0SegmentRomStart, _ccm_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0(0xb, _effect_mio0SegmentRomStart, _effect_mio0SegmentRomEnd), 
	LOAD_MIO0(0x5, _group7_mio0SegmentRomStart, _group7_mio0SegmentRomEnd), 
	LOAD_RAW(0xc, _group7_geoSegmentRomStart, _group7_geoSegmentRomEnd), 
	LOAD_MIO0(0x6, _group16_mio0SegmentRomStart, _group16_mio0SegmentRomEnd), 
	LOAD_RAW(0xd, _group16_geoSegmentRomStart, _group16_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_8), 
	JUMP_LINK(script_func_global_17), 
	LOAD_MODEL_FROM_GEO(MODEL_CCC_MOVING_OCTAGONAL_MESH_PLATFORM, moving_octagonal_mesh_platform_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CCC_TILTING_SQUARE_PLATFORM, ccc_geo_000BF8), 
	LOAD_MODEL_FROM_GEO(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, ccc_huge_ice_block_lift_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CCC_ICE_A, ccc_ice_a_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CCC_ICE_B, ccc_ice_b_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_CCC_ICE_C, ccc_ice_c_geo), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, ccc_area_1),
		WARP_NODE(0x0A, LEVEL_CCC, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF0, LEVEL_CASTLE, 0x02, 0x14, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CASTLE, 0x02, 0x3C, WARP_NO_CHECKPOINT),
		WARP_NODE(0x01, LEVEL_CCC, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x14, LEVEL_CCC, 0x01, 0x14, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_EXCLAMATION_BOX, 6113, -2250, 4349, 0, 0, 0, 0x00010000, bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, 10088, -2250, 3112, 0, 0, 0, 0x00010000, bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -4973, -1750, 7615, 0, 0, 0, 0x00020000, bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -8050, -3750, 4322, 0, 135, 0, 0x00020000, bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -7551, -2500, 5406, 0, 0, 0, 0x00000000, bhvExclamationBox),
		OBJECT(MODEL_EXCLAMATION_BOX, -3952, -1750, 7615, 0, 0, 0, 0x00000000, bhvExclamationBox),
		OBJECT(MODEL_ARROW_SIGN_LEFT, -1323, 700, -9781, 0, 120, 0, 0x00AF0000, bhvArrowSignLeft),
		OBJECT(MODEL_ARROW_SIGN_LEFT, 1663, -2500, 484, 0, 180, 0, 0x00AF0000, bhvArrowSignLeft),
		OBJECT(MODEL_ARROW_SIGN_LEFT, -2037, -4000, 3562, 0, 20, 0, 0x00AF0000, bhvArrowSignLeft),
		OBJECT(MODEL_ARROW_SIGN_RIGHT, 4355, -2500, 4211, 0, 180, 0, 0x00AF0000, bhvArrowSignRight),
		OBJECT(MODEL_BOBOMB_BUDDY, 2653, -4000, 3249, 0, -90, 0, 0x00AB0000, bhvBobombBuddy),
		OBJECT(MODEL_BREAKABLE_BOX, 10800, -2500, 4000, 0, 0, 0, 0x00030000, bhvBreakableBox),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -2900, -4800, 3800, 0, -90, 0, 0x01200000, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -5300, -4800, 3800, 0, -90, 0, 0x01200000, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -6100, -4800, 3800, 0, -90, 0, 0x01200100, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -3700, -4800, 3800, 0, -90, 0, 0x01200100, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -8700, -4800, 3300, 0, -90, 0, 0x01080001, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -9500, -4000, 3300, 0, -90, 0, 0x01080101, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -9700, -3800, 3500, 0, -90, 0, 0x010C0000, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -8700, -3600, 4800, 0, -90, 0, 0x01100001, bhvSlidingPlatform3),
		OBJECT(MODEL_CCC_HUGE_ICE_BLOCK_LIFT, -4500, -4800, 3800, 0, -90, 0, 0x00000000, bhvCccSlidingPlatformSpecial),
		OBJECT(MODEL_CHILL_BULLY, 372, -2500, -174, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, 1082, -2500, 614, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, 5247, -2500, 637, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, -168, -4000, 4079, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, -163, -4000, 3643, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, -650, -4000, 3423, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, -1158, -4000, 3874, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CHILL_BULLY, -727, -4000, 4382, 0, 0, 0, 0x00000000, bhvSmallChillBully),
		OBJECT(MODEL_CCC_MOVING_OCTAGONAL_MESH_PLATFORM, 5250, -2650, 1750, 0, 0, 0, 0x00020000, bhvCccMovingOctagonalMeshPlatform),
		OBJECT(MODEL_CCC_TILTING_SQUARE_PLATFORM, 2300, -2800, 200, 0, 0, 0, 0x00000000, bhvCccTiltingInvertedPyramid),
		OBJECT(MODEL_CCC_TILTING_SQUARE_PLATFORM, 2900, -2800, 800, 0, 0, 0, 0x00000000, bhvCccTiltingInvertedPyramid),
		OBJECT(MODEL_CCC_TILTING_SQUARE_PLATFORM, 4100, -2800, 800, 0, 0, 0, 0x00000000, bhvCccTiltingInvertedPyramid),
		OBJECT(MODEL_CCC_TILTING_SQUARE_PLATFORM, 3500, -2800, 200, 0, 0, 0, 0x00000000, bhvCccTiltingInvertedPyramid),
		OBJECT(MODEL_MR_BLIZZARD_HIDDEN, -7805, -4000, 3532, 0, 90, 0, 0x00000000, bhvMrBlizzard),
		OBJECT(MODEL_MR_BLIZZARD_HIDDEN, -8843, -3600, 2512, 0, 90, 0, 0x00000000, bhvMrBlizzard),
		OBJECT(MODEL_MR_BLIZZARD_HIDDEN, -8771, -2800, 4041, 0, -90, 0, 0x00000000, bhvMrBlizzard),
		OBJECT(MODEL_MR_BLIZZARD_HIDDEN, -8885, -2000, 5896, 0, 135, 0, 0x00000000, bhvMrBlizzard),
		OBJECT(MODEL_MR_BLIZZARD_HIDDEN, -10626, -3600, 2763, 0, 135, 0, 0x00000000, bhvMrBlizzard),
		OBJECT(MODEL_RED_COIN, 3233, -1526, 3916, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5244, -2422, 2211, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -483, -3850, 3824, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -4461, -1750, 9291, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -8237, -3750, 4124, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 2198, -3875, 4050, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -5300, -3950, 3800, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -3700, -3950, 3800, 0, 0, 0, 0x00000000, bhvRedCoin),
		OBJECT(MODEL_NONE, 10800, -2400, 4000, 0, 0, 0, 0x01030001, bhvSpawnObjectFromAnother),
		OBJECT(MODEL_NONE, -9990, -4150, 1720, 0, 0, 0, 0x00000000, bhvHiddenRedCoinStar),
		OBJECT(MODEL_NONE, -10000, -2709, 6000, 0, 0, 0, 0x32010000, bhvWarp),
		OBJECT(MODEL_NONE, -9769, -2300, 5904, 0, -65, 0, 0x00140000, bhvLaunchDeathWarp),
		OBJECT(MODEL_WOODEN_SIGNPOST, 6241, -2500, 3650, 0, -90, 0, 0x00AF0000, bhvMessagePanel),
		OBJECT(MODEL_WOODEN_SIGNPOST, 2672, -4000, 3942, 0, -90, 0, 0x005B0000, bhvMessagePanel),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1951, 3907, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1743, 3908, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1335, 3915, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1130, 3915, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1951, 3695, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1743, 3697, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1534, 3695, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1335, 3704, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1130, 3703, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1951, 3470, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1743, 3471, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1534, 3470, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1335, 3478, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1130, 3477, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1951, 4132, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1743, 4134, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1534, 4132, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1335, 4141, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1130, 4140, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1951, 4358, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1743, 4359, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1534, 4358, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1335, 4366, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 3231, -1130, 4366, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -733, 598, -9316, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -792, 456, -8942, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -921, 360, -8603, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -1787, 48, -6496, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -1633, -51, -6081, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -1349, -121, -5799, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -195, -449, -4994, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 29, -486, -4676, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, 147, -504, -4286, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -9542, -3600, 2509, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -9881, -3600, 2509, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -10250, -3600, 2509, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -8363, -2000, 5861, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -10301, -2000, 4354, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -9378, -2000, 4815, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -10947, -2000, 6045, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -10455, -2000, 6784, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -9501, -2000, 6784, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -6100, -3950, 2200, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -5300, -3950, 5400, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -3700, -3950, 2200, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -2900, -3950, 5400, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -720, 700, -9737, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_YELLOW_COIN, -720, 700, -10085, 0, 0, 0, 0x00000000, bhvYellowCoin),
		OBJECT(MODEL_NONE, -719, 2400, -10860, 0, 0, 0, 0x000A0000, bhvSpinAirborneWarp),
		MARIO_POS(0x01, 0, 0, 0, 0),
		TERRAIN(ccc_area_1_collision),
		MACRO_OBJECTS(ccc_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, SEQ_LEVEL_SNOW),
		TERRAIN_TYPE(TERRAIN_SNOW),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	AREA(2, ccc_area_2),
		WARP_NODE(0x0A, LEVEL_CCC, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF0, LEVEL_CASTLE, 0x02, 0x14, WARP_NO_CHECKPOINT),
		WARP_NODE(0xF1, LEVEL_CCC, 0x01, 0x14, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_CCC_ICE_A, 0, 750, 0, 0, 0, 0, 0x00000000, bhvFallingIcePlatformA),
		OBJECT(MODEL_CCC_ICE_B, 0, 750, 1942, 0, 0, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, 1373, 750, 1373, 0, 45, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, 1942, 750, 0, 0, 90, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, 1373, 750, -1373, 0, 135, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, 0, 750, -1942, 0, 180, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, -1373, 750, -1373, 0, -135, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, -1942, 750, 0, 0, -90, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_B, -1373, 750, 1373, 0, -45, 0, 0x00000000, bhvFallingIcePlatformB),
		OBJECT(MODEL_CCC_ICE_C, 0, 750, 2540, 0, 0, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, 1796, 750, 1796, 0, 45, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, 2540, 750, 0, 0, 90, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, 1796, 750, -1796, 0, 135, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, 0, 750, -2540, 0, 180, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, -1796, 750, -1796, 0, -135, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, -2540, 750, 0, 0, -90, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_CCC_ICE_C, -1796, 750, 1796, 0, -45, 0, 0x00000000, bhvFallingIcePlatformC),
		OBJECT(MODEL_BIG_CHILL_BULLY, 0, 1000, 0, 0, -180, 0, 0x02000000, bhvChiefChilly),
		OBJECT(MODEL_NONE, 0, 2700, -1050, 0, 0, 0, 0x000A0000, bhvSpinAirborneWarp),
		TERRAIN(ccc_area_2_collision),
		MACRO_OBJECTS(ccc_area_2_macro_objs),
		STOP_MUSIC(0),
		TERRAIN_TYPE(TERRAIN_SNOW),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(0x01, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
